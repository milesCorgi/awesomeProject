webpackJsonp([1],{Hicm:function(e,i){},fLXu:function(e,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=s("bFR2"),t={name:"addForm",data:function(){return{IsLogin:!1,showTips:!0,submitDisable:!1,keyword:"",passwordType:"password",form:{Info:"",TheTime:"",BiliBiliLink:"",BiliBiliID:"",YoutubeLink:"",OtherLink:"",EditPassWord:"",InfoType:"0",FanFictionLink:"",ImgLinks:[{value:""}]},user:{UserName:""},imgLinksStr:"",options:[],allOptions:[]}},created:function(){this.user.UserName=o.a.get("two-set-info-username"),console.log(this.user.UserName),void 0!==this.user.UserName&&""!==this.user.UserName&&(this.IsLogin=!0),this.getKeyWords()},methods:{isMobile:function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},getKayWordsToShow:function(){console.log("执行"),this.options=[];for(var e=0;e<this.allOptions.length;e++)console.log(this.allOptions[e]),this.allOptions[e].InfoType===this.form.InfoType&&this.options.push(this.allOptions[e])},addTheKeyWord:function(){for(var e=this,i=!0,s=0;s<this.options.length;s++)if(this.options[s].value===this.keyword){i=!1;break}""===this.keyword&&(i=!1),console.log("addTheKeyWord",i),i&&this.$http.post("/api/add_keyword",{KeyWord:this.keyword,InfoType:this.form.InfoType,User:this.user.UserName},{emulateJSON:!0}).then(function(i){var s=i.data;0===s.error_num?e.$message({type:"success",message:"新关键词提交成功",duration:500}):e.$message.error(s.msg)})},getKeyWords:function(){var e=this;this.$http.post("/api/get_keywords").then(function(i){console.log(i);var s=i.data;if(e.options=[],e.allOptions=[],0===s.error_num)for(var o=0;o<s.keyWord_list.length;o++)e.allOptions.push({value:s.keyWord_list[o].KeyWord,label:s.keyWord_list[o].KeyWord,InfoType:s.keyWord_list[o].InfoType});else e.$message.error(s.msg)})},openUrl:function(e){window.open(e)},removeImgLink:function(e){var i=this.form.ImgLinks.indexOf(e);-1!==i&&this.form.ImgLinks.splice(i,1)},addImgLink:function(){this.form.ImgLinks.push({value:"",key:Date.now()})},AddTwoSetVideoInfo:function(){for(var e=this,i=0;i<this.form.ImgLinks.length;i++)this.imgLinksStr=this.imgLinksStr+this.form.ImgLinks[i].value,i!==this.form.ImgLinks.length-1&&(this.imgLinksStr=this.imgLinksStr+"\n");console.log(this.imgLinksStr);var s=!0;void 0!==this.user.UserName&&""!==this.user.UserName||(s=!1,this.$message.warning("请重新登录")),""===this.form.Info&&(s=!1,this.$message.warning("描述不可为空")),""===this.form.BiliBiliLink&&""===this.form.YoutubeLink&&""===this.form.OtherLink&&""===this.imgLinksStr&&""===this.form.FanFictionLink&&""===this.form.BiliBiliID&&(s=!1,this.$message.warning("链接必须填至少一个,或者起码提供个B站号")),""!==this.form.BiliBiliLink&&""===this.form.BiliBiliID&&(s=!1,this.$message.warning("提供B站链接同时，需要提供B站号用于检索")),s&&(this.addTheKeyWord(),this.submitDisable=!0,this.$http.post("/api/add_two_set_video_info",{Info:""===this.keyword?this.form.Info:"【"+this.keyword+"】"+this.form.Info,TheTime:this.form.TheTime,KeyWord:this.keyword,BiliBiliLink:this.form.BiliBiliLink,BiliBiliID:this.form.BiliBiliID,YoutubeLink:this.form.YoutubeLink,OtherLink:this.form.OtherLink,EditPassWord:this.form.EditPassWord,ImgLinks:this.imgLinksStr,InfoType:this.form.InfoType,FanFictionLink:this.form.FanFictionLink,User:this.user.UserName},{emulateJSON:!0}).then(function(i){console.log(i);var s=i.data;0===s.error_num?(e.submitDisable=!1,e.form.Info="",e.form.TheTime="",e.form.BiliBiliLink="",e.form.BiliBiliID="",e.form.YoutubeLink="",e.form.OtherLink="",e.form.EditPassWord="",e.form.FanFictionLink="",e.form.InfoType="0",e.form.ImgLinks=[{value:""}],e.form.imgLinksStr="",e.keyword="",e.$message({type:"success",message:"提交成功",duration:500})):(e.submitDisable=!1,e.$message.error(s.msg))}))}}},r={render:function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",{attrs:{align:"center"}},[s("strong",{directives:[{name:"show",rawName:"v-show",value:!e.IsLogin,expression:"!IsLogin"}]},[e._v("请先登录")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.IsLogin,expression:"IsLogin"}]},[s("p",[s("strong",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.user.UserName)+"你好。")])]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"130px","label-position":"left"}},[s("el-form-item",{attrs:{label:"是否显示指引"}},[s("div",{staticStyle:{"text-align":"left"}},[s("el-switch",{model:{value:e.showTips,callback:function(i){e.showTips=i},expression:"showTips"}})],1)]),e._v(" "),s("el-form-item",{attrs:{label:"萌点类型"}},[s("div",{staticStyle:{"text-align":"left"}},[s("el-radio-group",{attrs:{size:"mini"},model:{value:e.form.InfoType,callback:function(i){e.$set(e.form,"InfoType",i)},expression:"form.InfoType"}},[s("el-radio-button",{attrs:{label:"0"}},[e._v("视频")]),e._v(" "),s("el-radio-button",{attrs:{label:"1"}},[e._v("图片")]),e._v(" "),s("el-radio-button",{attrs:{label:"2"}},[e._v("同人")])],1)],1)]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticStyle:{"font-size":"10px"}},[e._v(" ↓可选择萌点关键词,没有的话双击箭头手动输入")]),e._v(" "),s("el-form-item",{attrs:{label:"关键词"}},[s("div",{staticStyle:{"text-align":"left"}},[s("el-select",{attrs:{clearable:"",filterable:"","allow-create":""},on:{focus:function(i){return e.getKayWordsToShow()}},model:{value:e.keyword,callback:function(i){e.keyword=i},expression:"keyword"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticStyle:{"font-size":"10px"}},[e._v(" ↓描述不可为空")]),e._v(" "),s("el-form-item",{attrs:{label:"详细描述"}},[s("el-input",{attrs:{type:"textarea",autosize:!0},model:{value:e.form.Info,callback:function(i){e.$set(e.form,"Info",i)},expression:"form.Info"}})],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"===e.form.InfoType,expression:"form.InfoType === '2'"}],attrs:{label:"同人作品外链"}},[s("el-input",{model:{value:e.form.FanFictionLink,callback:function(i){e.$set(e.form,"FanFictionLink",i)},expression:"form.FanFictionLink"}})],1),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"0"===e.form.InfoType,expression:"showTips&&form.InfoType === '0'"}],staticStyle:{"font-size":"10px"}},[e._v(" ↓强烈建议尽量带上【在该视频的哪个时段】的描述，会极大方便定位萌点")]),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.form.InfoType,expression:"form.InfoType === '0'"}],attrs:{label:"出现在视频的时段"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.form.TheTime,callback:function(i){e.$set(e.form,"TheTime",i)},expression:"form.TheTime"}})],1),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"0"===e.form.InfoType,expression:"showTips&&form.InfoType === '0'"}],staticStyle:{"font-size":"10px"}},[e._v(" ↓链接必须填至少一个")]),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.form.InfoType,expression:"form.InfoType === '0'"}],attrs:{label:"b站链接"}},[s("el-input",{model:{value:e.form.BiliBiliLink,callback:function(i){e.$set(e.form,"BiliBiliLink",i)},expression:"form.BiliBiliLink"}})],1),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"0"===e.form.InfoType,expression:"showTips&&form.InfoType === '0'"}],staticStyle:{"font-size":"10px"}},[e._v(" 手机端可以在界面长按B站号，就复制到剪贴板了")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"0"===e.form.InfoType,expression:"showTips&&form.InfoType === '0'"}],staticStyle:{"font-size":"10px"}},[e._v(" 电脑端获取B站号方法")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"0"===e.form.InfoType,expression:"showTips&&form.InfoType === '0'"}],staticStyle:{"font-size":"10px"}},[e._v("\n        例如电脑端的B站链接：https://www.bilibili.com/video/"),s("strong",[e._v("BV1eb411m7GR")]),e._v("/?spm_id_from=333.788.recommend_more_video.0")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"0"===e.form.InfoType,expression:"showTips&&form.InfoType === '0'"}],staticStyle:{"font-size":"10px"}},[s("strong",[e._v("BV1eb411m7GR")]),e._v("就是对应的b站号")]),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.form.InfoType,expression:"form.InfoType === '0'"}],attrs:{label:"b站号"}},[s("el-input",{model:{value:e.form.BiliBiliID,callback:function(i){e.$set(e.form,"BiliBiliID",i)},expression:"form.BiliBiliID"}})],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.form.InfoType,expression:"form.InfoType === '0'"}],attrs:{label:"油管链接"}},[s("el-input",{model:{value:e.form.YoutubeLink,callback:function(i){e.$set(e.form,"YoutubeLink",i)},expression:"form.YoutubeLink"}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticStyle:{display:"inline-block","text-align":"center","margin-bottom":"10px"}},[s("span",[e._v("可以用这个网站生成本地视频的链接:")]),e._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:function(i){return e.openUrl("https://streamja.com/")}}},[e._v("https://streamja.com/")])]),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.form.InfoType,expression:"form.InfoType === '0'"}],attrs:{label:"其余渠道的链接"}},[s("el-input",{model:{value:e.form.OtherLink,callback:function(i){e.$set(e.form,"OtherLink",i)},expression:"form.OtherLink"}})],1),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticStyle:{"font-size":"10px"}},[e._v(" ↓描述需要附图的，请提供外链")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticStyle:{"font-size":"10px"}},[e._v(" ↓外链可在应用市场搜素关键词【图床】，有各种app提供支持")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticStyle:{display:"inline-block","text-align":"center"}},[s("span",[e._v("在线图床sm.ms(推荐):")]),e._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:function(i){return e.openUrl("https://sm.ms/")}}},[e._v("https://sm.ms/")])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticStyle:{"font-size":"10px"}},[e._v(" sm.ms挑网络，二狗家用流量能上，可是用wifi不行")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticStyle:{display:"inline-block","text-align":"center"}},[s("span",[e._v("在线图床imgchr:")]),e._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:function(i){return e.openUrl("https://imgchr.com/")}}},[e._v("https://imgchr.com/")])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticStyle:{"font-size":"10px"}},[e._v(" 注意用imgchr拿到图链后往下划拉，提交【"),s("strong",[e._v("图片URL链接")]),e._v("】而不是【图片链接】,否则不支持在线浏览。 ")]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},on:{click:e.addImgLink}},[e._v("新增图链")]),e._v(" "),e._l(e.form.ImgLinks,function(i,o){return s("el-form-item",{key:i.key,attrs:{label:"图链",prop:"ImgLinks."+o+".value"}},[s("el-input",{model:{value:i.value,callback:function(s){e.$set(i,"value",s)},expression:"imglink.value"}},[s("i",{staticClass:"el-icon-delete",attrs:{slot:"suffix"},on:{click:function(s){return e.removeImgLink(i)}},slot:"suffix"})])],1)})],2),e._v(" "),s("strong",{staticStyle:{"font-size":"12px"}},[e._v("请确保提交的都是琴琴相关有效信息")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.submitDisable},on:{click:e.AddTwoSetVideoInfo}},[e._v("提交")])],1)])},staticRenderFns:[]};var n=s("VU/8")(t,r,!1,function(e){s("Hicm")},"data-v-c8abeb2e",null);i.default=n.exports}});